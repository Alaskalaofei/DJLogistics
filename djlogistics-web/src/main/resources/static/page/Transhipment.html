<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>转运发送</title>
		<script src="../lib/layui-v2.5.4/layui.js"></script>
		<link rel="stylesheet" href="../lib/layui-v2.5.4/css/layui.css"  media="all">
	</head>
	<body>
		<div class="layui-fluid">
		    <div class="layui-row">
		        <div class="layui-col-xs12">
		            <div class="layui-row">
		                <div class="layui-col-xs6">
		                    <div class="layui-btn-container">
		                        <button id="Selectwaybill" class="layui-btn layui-btn-normal layui-btn-lg">选取运单</button><button class="layui-btn layui-btn-lg layui-btn-normal">选取袋</button><button class="layui-btn layui-btn-lg layui-btn-danger">撤销运单</button><button class="layui-btn layui-btn-lg layui-btn-normal">继续发件</button><button class="layui-btn layui-btn-lg layui-btn-normal">显示袋</button><button class="layui-btn layui-btn-lg layui-btn-normal">显示板</button>
		                    </div>
		                </div>
		                <div class="layui-col-xs6">
		                    <span><p style="font-size: 18px; font-weight: 500;">
		                        转运单号：3262632
		                    </p>
		                    </span>
		                </div>
		                <div class="layui-col-xs12">
		                    <div class="layui-input-inline" style="color: rgb(255, 0, 0);">
		                        注意：原则上同一运单要求装在同一转运单中，转运单的运单异常分两种情况：1、少件未出；2、出在其他转运单
		                    </div>
		                </div>
		            </div>
		        </div>
		        <div class="layui-col-xs12">
						<table class="layui-table" id="test" lay-filter="test"></table>
				</div>
		    </div>
		</div>
	</body>
	<script>
		layui.use('layer',function(){
			 var $ = layui.jquery, layer = layui.layer;
			 
			 $("#Selectwaybill").on("click",function(){
					layer.open({
						    		  type:2,
										content:'Selectwaybill.html',
										area:['995px','600px'],
										title:'选取运单',
										success: function (layero, index) {   //弹出层弹出后的回调函数
							                var iframe = window['layui-layer-iframe' + index];// 获取子页面的iframe
							                iframe.child(data.id);   // 向子页面的全局函数child传参
							            },			
										end:function(){     //弹出层销毁后的事件
											table.reload("userTableReload");//增加成功后刷新表格
										}
						    	  })
				});
			 
				$("#Updatetransfernote").on("click",function(){
										layer.open({
											    		  type:2,
															content:'addTransshipmentanddispatchmanagement.html',
															area:['800px','500px'],
															title:'编辑学生信息',
															success: function (layero, index) {   //弹出层弹出后的回调函数
												                var iframe = window['layui-layer-iframe' + index];// 获取子页面的iframe
												                iframe.child(data.id);   // 向子页面的全局函数child传参
												            },			
															end:function(){     //弹出层销毁后的事件
																table.reload("userTableReload");//增加成功后刷新表格
															}
											    	  })
									});
			
		})
	</script>
	<script>
		layui.use(['element', 'form'], function() {
			var element = layui.element,
				form = layui.form;
			form.render();
		});
		layui.use(["table", "jquery", "layer", "form", "laypage"], function() {
			var table = layui.table,
				$ = layui.jquery,
				layer = layui.layer,
				form = layui.form,
				util = layui.util;
	
			table.render({
				elem: '#test',
				url: '../RecordController/recordlist',
				method: 'post',
				parseData: function(res) { //res 即为原始返回的数据
					return {
						"code": res.code, //解析接口状态
						"msg": res.msg, //解析提示文本
						"count": res.count, //解析数据长度
						"data": res.data //解析数据列表
					}
				},
				request: {
					stuName: 'index' //页码的参数名称，默认：page
						,
					limitName: 'pageSize' //每页数据量的参数名，默认：limit
				},
				cols: [
					[{
						field: 'rid',
						title: '编号',
						sort: true
					}, {
						field: 'fname',
						title: '妻子姓名'
					}, {
						field: 'fbirth',
						title: '妻子出生日期',
						templet: function(row) {
							return createTime(row.fbirth);
						}
					}, {
						field: 'fcertificate',
						title: '妻子证件号码',
						sort: true
					}, {
						field: 'bname',
						title: '丈夫姓名'
					}, {
						field: 'birth',
						title: '丈夫出生日期',
						templet: function(row) {
							return createTime(row.birth);
						}
					}, {
						field: 'bcertificate',
						title: '丈夫证件号码',
						sort: true
					}, {
						field: 'creationtime',
						title: '建档日期',
						templet: function(row) {
							return createTime(row.creationtime);
						}
					}]
				],
				page: true,
				id: 'userTableReload'
			});
	
	
			//根据条件查询表格数据重新加载
			var $ = layui.$,
				active = {
					reload: function() {
						//获取用户名
						var creationtime = $("#creationtime").val();
						var fcertificate = $("#fcertificate").val();
						var fname = $("#fname").val();
						var bcertificate = $("#bcertificate").val();
						var bname = $("#bname").val();
						var fbirth = $("#fbirth").val();
						var birth = $("#birth").val();
						var rid = $("#rid").val();
						//执行重载
						table.reload('userTableReload', {
							page: {
								curr: 1 //重新从第 1 页开始
							}
							//根据条件查询
							,
							where: {
								creationtime: creationtime,
								fcertificate: fcertificate,
								fname: fname,
								bcertificate: bcertificate,
								bname: bname,
								fbirth: fbirth,
								birth: birth,
								rid: rid
							}
						});
					}
				};
			//点击搜索按钮根据用户名称查询
			$('#btn_yes').on('click',
				function() {
					var type = $(this).data('type');
					active[type] ? active[type].call(this) : '';
				});
	
	
	
		});
	</script>
</html>
